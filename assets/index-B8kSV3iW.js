import{V as g,a as x,b as K,r as d,d as c,o as O,g as D,s as E,c as h,p as F,e as U}from"./VTextField-Dsun9YRr.js";import{g as q,p as Q,u as N,a as G,b as A,c as n,m as H,d as J,e as W,f as z,h as L,i as Y,t as C,r as X,j as V,k as P,V as _,l as Z,o as ee,n as te,_ as ae,q as y,s as m,w as s,v as b,x as f,y as u,z as se,A as R,B as oe}from"./index-Dy1NA2zH.js";const re=Q({fluid:{type:Boolean,default:!1},...W(),...J(),...H()},"VContainer"),ne=q()({name:"VContainer",props:re(),setup(t,e){let{slots:o}=e;const{rtlClasses:r}=N(),{dimensionStyles:a}=G(t);return A(()=>n(t.tag,{class:["v-container",{"v-container--fluid":t.fluid},r.value,t.class],style:[a.value,t.style]},o)),{}}}),ie=Q({id:String,interactive:Boolean,text:String,...ee(te({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),I=q()({name:"VTooltip",props:ie(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:o}=e;const r=z(t,"modelValue"),{scopeId:a}=L(),i=Y(),l=C(()=>t.id||`v-tooltip-${i}`),j=X(),S=V(()=>t.location.split(" ").length>1?t.location:t.location+" center"),B=V(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),M=C(()=>t.transition?t.transition:r.value?"scale-transition":"fade-transition"),T=V(()=>P({"aria-describedby":l.value},t.activatorProps));return A(()=>{const $=_.filterProps(t);return n(_,P({ref:j,class:["v-tooltip",{"v-tooltip--interactive":t.interactive},t.class],style:t.style,id:l.value},$,{modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,transition:M.value,absolute:!0,location:S.value,origin:B.value,persistent:!0,role:"tooltip",activatorProps:T.value,_disableGlobalStack:!0},a),{activator:o.activator,default:function(){var w;for(var v=arguments.length,k=new Array(v),p=0;p<v;p++)k[p]=arguments[p];return((w=o.default)==null?void 0:w.call(o,...k))??t.text}})}),Z({},j)}}),le={name:"MoveCardChess",data(){return{username:"",joinedQueue:!1,userKey:null,userId:this.generateRandomId(),router:null}},created(){this.router=oe()},methods:{async joinQueue(){if(this.joinedQueue=!0,!this.username.trim()){console.error("Username is required"),alert("Please enter a username.");return}try{const t=d(c,"queue/"),e=await F(t,{userId:this.userId,username:this.username.trim(),avatar:null,joinedAt:Date.now()});this.userKey=e.key,this.joinedQueue=!0,localStorage.setItem("username",this.username.trim()),localStorage.setItem("userId",this.userId);const o=d(c,`queue/${this.userKey}`);U(o).remove(),this.listenForGame(),this.tryMatchPlayers()}catch(t){console.error("Error joining queue:",t),alert("Failed to join the queue. Please try again."),this.joinedQueue=!1}},generateRandomId(){return"user_"+Math.random().toString(36).substr(2,9)},async leaveQueue(){if(this.userKey){const t=d(c,`queue/${this.userKey}`);try{await h(t),this.joinedQueue=!1}catch(e){console.error("Error manually removing user from queue:",e)}}},async tryMatchPlayers(){const t=d(c,"queue/"),e=await D(t);if(e.exists()){const o=Object.entries(e.val());if(o.length>=2){const[r,a]=o;r[1].color="white",a[1].color="black";const i=`${Math.random().toString(36).substr(2,9)}`,l=d(c,`games/${i}`);await E(l,{player1:r[1],player2:a[1],currentTurn:"player1",createdAt:Date.now()}),await h(d(c,`queue/${r[0]}`)),await h(d(c,`queue/${a[0]}`)),(r[0]===this.userKey||a[0]===this.userKey)&&this.router.push(`/game/${i}`)}}},listenForGame(){const t=d(c,"games/");this.listenerOff=O(t,e=>{var o,r;if(e.exists()){const a=e.val();for(const i in a){const l=a[i];if(((o=l.player1)==null?void 0:o.userId)===this.userId||((r=l.player2)==null?void 0:r.userId)===this.userId){this.router.push(`/game/${i}`);return}}}})}},beforeUnmount(){this.leaveQueue()}},ue={class:"mb-4",justify:"center"},de={key:0,class:"text-h6 font-weight-bold"},ce={key:1,class:"text-h6 font-weight-bold"};function me(t,e,o,r,a,i){return m(),y(ne,{class:"max-height",fluid:""},{default:s(()=>[n(g,{justify:"center"},{default:s(()=>[n(x,{md:"6",class:"text-center"},{default:s(()=>[n(g,{justify:"center"},{default:s(()=>e[2]||(e[2]=[b("h2",{class:"text-h4 font-weight-bold"}," Singleplayer ",-1)])),_:1}),n(g,{justify:"center",class:"singleplayer-section"},{default:s(()=>[n(f,{color:"primary",large:"",rounded:"",onClick:e[0]||(e[0]=l=>a.router.push("/game/singleplayer"))},{default:s(()=>e[3]||(e[3]=[u(" Play Against Random AI ")])),_:1}),n(f,{color:"warning",large:"",rounded:""},{default:s(()=>[e[5]||(e[5]=u(" Play Against Easy AI ")),n(I,{activator:"parent",location:"end"},{default:s(()=>e[4]||(e[4]=[u("Coming soon...")])),_:1})]),_:1}),n(f,{color:"success",large:"",rounded:""},{default:s(()=>[e[7]||(e[7]=u(" Play Against Medium AI ")),n(I,{activator:"parent",location:"end"},{default:s(()=>e[6]||(e[6]=[u("Coming soon...")])),_:1})]),_:1}),n(f,{color:"error",large:"",rounded:""},{default:s(()=>[e[9]||(e[9]=u(" Play Against Hard AI ")),n(I,{activator:"parent",location:"end"},{default:s(()=>e[8]||(e[8]=[u("Coming soon...")])),_:1})]),_:1})]),_:1})]),_:1}),n(x,{md:"6",class:"text-center"},{default:s(()=>[n(g,{justify:"center"},{default:s(()=>e[10]||(e[10]=[b("h2",{class:"text-h4 font-weight-bold"}," Multiplayer ",-1)])),_:1}),n(g,{justify:"center",class:"multiplayer-section"},{default:s(()=>[b("div",ue,[a.joinedQueue?(m(),R("span",de,"You have joined the queue! Waiting for another player")):(m(),R("span",ce,"Join the queue to play with other players!"))]),a.joinedQueue?se("",!0):(m(),y(K,{key:0,modelValue:a.username,"onUpdate:modelValue":e[1]||(e[1]=l=>a.username=l),label:"Enter your username",outlined:"",class:"mb-6"},null,8,["modelValue"])),a.joinedQueue?(m(),y(f,{key:1,color:"error",large:"",rounded:"",onClick:i.leaveQueue},{default:s(()=>e[11]||(e[11]=[u(" Leave Queue ")])),_:1},8,["onClick"])):(m(),y(f,{key:2,color:"primary",large:"",rounded:"",onClick:i.joinQueue,disabled:!0},{default:s(()=>e[12]||(e[12]=[u(" Join Queue ")])),_:1},8,["onClick"]))]),_:1})]),_:1})]),_:1})]),_:1})}const fe=ae(le,[["render",me],["__scopeId","data-v-6068b2b9"]]),ve={__name:"index",setup(t){return(e,o)=>{const r=fe;return m(),y(r)}}};export{ve as default};
