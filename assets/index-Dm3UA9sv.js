import{u as Q,a as F,b as L,c as z,d as me,g as M,V as E,e as P,f as S,m as K,h as ve,i as $,j as B,k as O,R as ye,l as fe,n as ge,o as he,p as ke,q as be,r as Ce,s as Ve,t as Ie,v as _e,w as Se,L as xe,x as Ae,y as Pe,z as pe,A as Be,B as u,C as o,D as je,E as we,F as Re,G as A,H as qe,I as Te}from"./VTextField-CkcgyUz4.js";import{g as c,m,c as De,h as Ne,a as Qe,p as Fe,u as y,b as n,d as g,e as V,f as U,i as G,I as C,F as R,t as q,j as H,w as Le,r as ze,k as Me,l as J,n as Ee,_ as Ke,o as p,q as b,s as v,v as $e,x as Oe,y as T,z as D,A as Ue}from"./index-BV9E7uiT.js";function Ge(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",t=arguments.length>2?arguments[2]:void 0;return c()({name:t??De(Qe(e.replace(/__/g,"-"))),props:{tag:{type:String,default:s},...m()},setup(a,l){let{slots:i}=l;return()=>{var r;return Ne(a.tag,{class:[e,a.class],style:a.style},(r=i.default)==null?void 0:r.call(i))}}})}const Y=c()({name:"VCardActions",props:m(),setup(e,s){let{slots:t}=s;return Fe({VBtn:{slim:!0,variant:"text"}}),y(()=>{var a;return n("div",{class:["v-card-actions",e.class],style:e.style},[(a=t.default)==null?void 0:a.call(t)])}),{}}}),He=g({opacity:[Number,String],...m(),...V()},"VCardSubtitle"),Je=c()({name:"VCardSubtitle",props:He(),setup(e,s){let{slots:t}=s;return y(()=>n(e.tag,{class:["v-card-subtitle",e.class],style:[{"--v-card-subtitle-opacity":e.opacity},e.style]},t)),{}}}),W=Ge("v-card-title"),Ye=g({start:Boolean,end:Boolean,icon:C,image:String,text:String,...O(),...m(),...B(),...$(),...ve(),...V(),...G(),...K({variant:"flat"})},"VAvatar"),N=c()({name:"VAvatar",props:Ye(),setup(e,s){let{slots:t}=s;const{themeClasses:a}=U(e),{borderClasses:l}=Q(e),{colorClasses:i,colorStyles:r,variantClasses:h}=F(e),{densityClasses:k}=L(e),{roundedClasses:f}=z(e),{sizeClasses:d,sizeStyles:x}=me(e);return y(()=>n(e.tag,{class:["v-avatar",{"v-avatar--start":e.start,"v-avatar--end":e.end},a.value,l.value,i.value,k.value,f.value,d.value,h.value,e.class],style:[r.value,x.value,e.style]},{default:()=>[t.default?n(S,{key:"content-defaults",defaults:{VImg:{cover:!0,src:e.image},VIcon:{icon:e.icon}}},{default:()=>[t.default()]}):e.image?n(E,{key:"image",src:e.image,alt:"",cover:!0},null):e.icon?n(P,{key:"icon",icon:e.icon},null):e.text,M(!1,"v-avatar")]})),{}}}),We=g({appendAvatar:String,appendIcon:C,prependAvatar:String,prependIcon:C,subtitle:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...m(),...B()},"VCardItem"),Xe=c()({name:"VCardItem",props:We(),setup(e,s){let{slots:t}=s;return y(()=>{var f;const a=!!(e.prependAvatar||e.prependIcon),l=!!(a||t.prepend),i=!!(e.appendAvatar||e.appendIcon),r=!!(i||t.append),h=!!(e.title!=null||t.title),k=!!(e.subtitle!=null||t.subtitle);return n("div",{class:["v-card-item",e.class],style:e.style},[l&&n("div",{key:"prepend",class:"v-card-item__prepend"},[t.prepend?n(S,{key:"prepend-defaults",disabled:!a,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon}}},t.prepend):n(R,null,[e.prependAvatar&&n(N,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&n(P,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)])]),n("div",{class:"v-card-item__content"},[h&&n(W,{key:"title"},{default:()=>{var d;return[((d=t.title)==null?void 0:d.call(t))??q(e.title)]}}),k&&n(Je,{key:"subtitle"},{default:()=>{var d;return[((d=t.subtitle)==null?void 0:d.call(t))??q(e.subtitle)]}}),(f=t.default)==null?void 0:f.call(t)]),r&&n("div",{key:"append",class:"v-card-item__append"},[t.append?n(S,{key:"append-defaults",disabled:!i,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon}}},t.append):n(R,null,[e.appendIcon&&n(P,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&n(N,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)])])])}),{}}}),Ze=g({opacity:[Number,String],...m(),...V()},"VCardText"),ea=c()({name:"VCardText",props:Ze(),setup(e,s){let{slots:t}=s;return y(()=>n(e.tag,{class:["v-card-text",e.class],style:[{"--v-card-text-opacity":e.opacity},e.style]},t)),{}}}),aa=g({appendAvatar:String,appendIcon:C,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:C,ripple:{type:[Boolean,Object],default:!0},subtitle:{type:[String,Number,Boolean],default:void 0},text:{type:[String,Number,Boolean],default:void 0},title:{type:[String,Number,Boolean],default:void 0},...O(),...m(),...B(),...J(),...Se(),..._e(),...Ie(),...Ve(),...$(),...Ce(),...V(),...G(),...K({variant:"elevated"})},"VCard"),ta=c()({name:"VCard",directives:{Ripple:ye},props:aa(),setup(e,s){let{attrs:t,slots:a}=s;const{themeClasses:l}=U(e),{borderClasses:i}=Q(e),{colorClasses:r,colorStyles:h,variantClasses:k}=F(e),{densityClasses:f}=L(e),{dimensionStyles:d}=H(e),{elevationClasses:x}=fe(e),{loaderClasses:X}=ge(e),{locationStyles:Z}=he(e),{positionClasses:ee}=ke(e),{roundedClasses:ae}=z(e),I=be(e,t);return y(()=>{const te=e.link!==!1&&I.isLink.value,_=!e.disabled&&e.link!==!1&&(e.link||I.isClickable.value),ne=te?"a":e.tag,se=!!(a.title||e.title!=null),le=!!(a.subtitle||e.subtitle!=null),ie=se||le,re=!!(a.append||e.appendAvatar||e.appendIcon),de=!!(a.prepend||e.prependAvatar||e.prependIcon),ue=!!(a.image||e.image),oe=ie||de||re,ce=!!(a.text||e.text!=null);return Le(n(ne,Me({class:["v-card",{"v-card--disabled":e.disabled,"v-card--flat":e.flat,"v-card--hover":e.hover&&!(e.disabled||e.flat),"v-card--link":_},l.value,i.value,r.value,f.value,x.value,X.value,ee.value,ae.value,k.value,e.class],style:[h.value,d.value,Z.value,e.style],onClick:_&&I.navigate,tabindex:e.disabled?-1:void 0},I.linkProps),{default:()=>{var j;return[ue&&n("div",{key:"image",class:"v-card__image"},[a.image?n(S,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},a.image):n(E,{key:"image-img",cover:!0,src:e.image},null)]),n(xe,{name:"v-card",active:!!e.loading,color:typeof e.loading=="boolean"?void 0:e.loading},{default:a.loader}),oe&&n(Xe,{key:"item",prependAvatar:e.prependAvatar,prependIcon:e.prependIcon,title:e.title,subtitle:e.subtitle,appendAvatar:e.appendAvatar,appendIcon:e.appendIcon},{default:a.item,prepend:a.prepend,title:a.title,subtitle:a.subtitle,append:a.append}),ce&&n(ea,{key:"text"},{default:()=>{var w;return[((w=a.text)==null?void 0:w.call(a))??e.text]}}),(j=a.default)==null?void 0:j.call(a),a.actions&&n(Y,null,{default:a.actions}),M(_,"v-card")]}}),[[ze("ripple"),_&&e.ripple]])}),{}}}),na=g({fluid:{type:Boolean,default:!1},...m(),...J(),...V()},"VContainer"),sa=c()({name:"VContainer",props:na(),setup(e,s){let{slots:t}=s;const{rtlClasses:a}=Ee(),{dimensionStyles:l}=H(e);return y(()=>n(e.tag,{class:["v-container",{"v-container--fluid":e.fluid},a.value,e.class],style:[l.value,e.style]},t)),{}}}),la={name:"MoveCardChess",data(){return{username:"",joinedQueue:!1,userKey:null,userId:this.generateRandomId(),router:null}},created(){this.router=Ue()},methods:{async joinQueue(){if(!this.username.trim()){console.error("Username is required"),alert("Please enter a username.");return}try{const e=u(o,"queue/"),s=await qe(e,{userId:this.userId,username:this.username.trim(),joinedAt:Date.now()});this.userKey=s.key,this.joinedQueue=!0,localStorage.setItem("username",this.username.trim()),localStorage.setItem("userId",this.userId);const t=u(o,`queue/${this.userKey}`);Te(t).remove(),this.listenForGame(),this.tryMatchPlayers()}catch(e){console.error("Error joining queue:",e),alert("Failed to join the queue. Please try again.")}},generateRandomId(){return"user_"+Math.random().toString(36).substr(2,9)},async leaveQueue(){if(this.userKey){const e=u(o,`queue/${this.userKey}`);try{await A(e)}catch(s){console.error("Error manually removing user from queue:",s)}}},async tryMatchPlayers(){const e=u(o,"queue/"),s=await we(e);if(s.exists()){const t=Object.entries(s.val());if(t.length>=2){const[a,l]=t;a[1].color="white",l[1].color="black";const i=`${Math.random().toString(36).substr(2,9)}`,r=u(o,`games/${i}`);await Re(r,{player1:a[1],player2:l[1],currentTurn:"player1",createdAt:Date.now()}),await A(u(o,`queue/${a[0]}`)),await A(u(o,`queue/${l[0]}`)),(a[0]===this.userKey||l[0]===this.userKey)&&this.router.push(`/game/${i}`)}}},listenForGame(){const e=u(o,"games/");this.listenerOff=je(e,s=>{var t,a;if(s.exists()){const l=s.val();for(const i in l){const r=l[i];if(((t=r.player1)==null?void 0:t.userId)===this.userId||((a=r.player2)==null?void 0:a.userId)===this.userId){this.router.push(`/game/${i}`);return}}}})}},beforeUnmount(){this.leaveQueue()}},ia={class:"mb-4"},ra={key:0,class:"text-h6 font-weight-bold"},da={key:1,class:"text-h6 font-weight-bold"};function ua(e,s,t,a,l,i){return b(),p(sa,{class:"fill-height",fluid:""},{default:v(()=>[n(Ae,{align:"center",justify:"center"},{default:v(()=>[n(Pe,{cols:"12",md:"6",class:"text-center"},{default:v(()=>[n(ta,{class:"pa-8",elevation:"10"},{default:v(()=>[n(W,{class:"text-h4 font-weight-bold justify-center mb-6"},{default:v(()=>s[1]||(s[1]=[T(" Move Card Chess ")])),_:1}),$e("div",ia,[l.joinedQueue?(b(),D("span",ra,"You have joined the queue!")):(b(),D("span",da,"Join the queue to play!"))]),l.joinedQueue?Oe("",!0):(b(),p(pe,{key:0,modelValue:l.username,"onUpdate:modelValue":s[0]||(s[0]=r=>l.username=r),label:"Enter your username",outlined:"",class:"mb-6"},null,8,["modelValue"])),n(Y,{class:"justify-center"},{default:v(()=>[n(Be,{loading:l.joinedQueue,color:"primary",large:"",rounded:"",onClick:i.joinQueue},{default:v(()=>s[2]||(s[2]=[T(" Join Queue ")])),_:1},8,["loading","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const oa=Ke(la,[["render",ua]]),va={__name:"index",setup(e){return(s,t)=>{const a=oa;return b(),p(a)}}};export{va as default};
