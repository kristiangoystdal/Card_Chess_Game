import{_ as I,o as C,c as P,a as x,b as M,d as O,e as S,f as H,g as V,h as v,i as B,j as T,k as j,l as q,m as A,n as E,V as G}from"./card_wild_w-3Flnz5kw.js";import{_ as z,$ as w,a1 as o,a7 as L,a0 as b,a4 as D,c as s,a2 as h,a5 as N,V as R,a8 as F,a3 as k}from"./index-Bhd6YrUw.js";import{V as g,k as f,l as _,o as U}from"./VTextField-Cb1y2RM5.js";const J={name:"GamePage",components:{ChessBoard:I},data(){return{gameId:"",gameData:null,handSize:5,cardTypes:[{type:"p",color:"black",image:P},{type:"p",color:"white",image:x},{type:"n",color:"black",image:M},{type:"n",color:"white",image:O},{type:"b",color:"black",image:S},{type:"b",color:"white",image:H},{type:"r",color:"black",image:V},{type:"r",color:"white",image:v},{type:"q",color:"black",image:B},{type:"q",color:"white",image:T},{type:"k",color:"black",image:j},{type:"k",color:"white",image:q},{type:"w",color:"black",image:A},{type:"w",color:"white",image:E}]}},async created(){const a=L();this.gameId=a.params.gameId,await this.createGame()},methods:{async createGame(){const a=["white","black"],e=Math.floor(Math.random()*a.length),t=a[e],p=a[(e+1)%a.length],r={userId:localStorage.getItem("userId")||"player1",username:localStorage.getItem("username")||"Player 1",color:t,hand:[]},d={userId:"opponent",username:"Opponent",color:p,hand:[]};r&&r.color&&r.color;const m=new C.Game,i=this.generateStartingDeck(),l=[],n=[];for(let y=0;y<this.handSize;y++)l.push(i.pop()),n.push(i.pop());r.hand=l,d.hand=n,this.gameData={player1:r,player2:d,game:m,deck:i,createdAt:Date.now(),mode:"singleplayer"},this.gameId="gameId",r.color==="black"&&this.makeAIMove()},generateStartingBoard(){const a=Array.from({length:8},()=>Array.from({length:8},()=>({color:"blank",type:"blank"}))),e=[{type:"rook",col:0},{type:"knight",col:1},{type:"bishop",col:2},{type:"queen",col:3},{type:"king",col:4},{type:"bishop",col:5},{type:"knight",col:6},{type:"rook",col:7}];return e.forEach(t=>{a[7][t.col]={color:"white",type:t.type},a[6][t.col]={color:"white",type:"pawn"}}),e.forEach(t=>{a[0][t.col]={color:"black",type:t.type},a[1][t.col]={color:"black",type:"pawn"}}),a},generateStartingDeck(){const a=[];[{type:"p",numberOfCards:16},{type:"n",numberOfCards:10},{type:"b",numberOfCards:10},{type:"r",numberOfCards:8},{type:"q",numberOfCards:6},{type:"k",numberOfCards:6},{type:"w",numberOfCards:4}].forEach(t=>{for(let p=0;p<t.numberOfCards;p++)a.push(t.type)});for(let t=a.length-1;t>0;t--){const p=Math.floor(Math.random()*(t+1));[a[t],a[p]]=[a[p],a[t]]}return a},updatePlayerHand(a){if(this.gameData){const e=this.gameData[a];if(e&&e.hand.length<this.handSize){const t=this.gameData.deck.splice(-1*(this.handSize-e.hand.length));e.hand.push(...t)}this.gameData[a]=e}},makeAIMove(){const e=this.gameData.player2.hand,t=this.gameData.game,p=t.moves(),r=[];for(const i in p)for(const l of p[i]){const n=t.board.configuration.pieces[i];if(!n)continue;const y=n.toLowerCase();(e.includes(y)||e.includes("w"))&&r.push({from:i,to:l,piece:n})}if(r.length===0){console.warn("AI has no legal moves it can make with its current hand.");return}const d=r[Math.floor(Math.random()*r.length)];t.move(d.from,d.to);const m=e.indexOf(d.piece.toLowerCase());if(m!==-1)e.splice(m,1);else{const i=e.indexOf("w");i!==-1&&e.splice(i,1)}this.updatePlayerHand("player2"),this.gameData.player2.hand=e,this.gameData.currentTurn="player1"},getLegalMoves(a,e,t,p){const r=[],d=(l,n)=>p[l][n].color!==a.color&&p[l][n].type!=="blank",m=(l,n)=>p[l][n].type==="blank",i=(l,n)=>l>=0&&l<=7&&n>=0&&n<=7;if(a.type==="pawn"){const l=a.color==="white"?1:-1;i(e+l,t)&&m(e+l,t)&&r.push({row:e+l,col:t}),i(e+l,t-1)&&d(e+l,t-1)&&r.push({row:e+l,col:t-1}),i(e+l,t+1)&&d(e+l,t+1)&&r.push({row:e+l,col:t+1})}if(a.type==="king"){const l=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[n,y]of l){const c=e+n,u=t+y;i(c,u)&&(m(c,u)||d(c,u))&&r.push({row:c,col:u})}}if(a.type==="knight"){const l=[[-2,-1],[-1,-2],[1,-2],[2,-1],[2,1],[1,2],[-1,2],[-2,1]];for(const[n,y]of l){const c=e+n,u=t+y;i(c,u)&&(m(c,u)||d(c,u))&&r.push({row:c,col:u})}}if(a.type==="bishop"||a.type==="rook"||a.type==="queen"){const l=a.type==="bishop"?[[-1,-1],[-1,1],[1,-1],[1,1]]:a.type==="rook"?[[-1,0],[0,-1],[0,1],[1,0]]:[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];for(const[n,y]of l){let c=e+n,u=t+y;for(;i(c,u);){if(m(c,u))r.push({row:c,col:u});else if(d(c,u)){r.push({row:c,col:u});break}else break;c+=n,u+=y}}}return r},endPlayerTurn(a){this.gameData.game=a.game,this.gameData.player1=a.player1,this.gameData.player2=a.player2,this.updatePlayerHand("player1"),this.makeAIMove()}},computed:{player1Hand(){return this.gameData?this.gameData.player1.hand:[]},player2Hand(){return this.gameData?this.gameData.player2.hand:[]},myPlayer(){const a=localStorage.getItem("userId");return a===this.gameData.player1.userId?this.gameData.player1:a===this.gameData.player2.userId?this.gameData.player2:null},myCardHand(){return this.myPlayer?this.myPlayer.hand:null},myColor(){return this.myPlayer?this.myPlayer.color:null}}};function K(a,e,t,p,r,d){const m=I;return b(),w(g,null,{default:o(()=>[r.gameData?(b(),w(f,{key:0,cols:"3"},{default:o(()=>[e[1]||(e[1]=h("br",null,null,-1)),s(g,null,{default:o(()=>[s(f,{class:"d-flex justify-center"},{default:o(()=>e[0]||(e[0]=[h("h2",null,"My Hand",-1)])),_:1})]),_:1}),s(g,null,{default:o(()=>[s(f,null,{default:o(()=>[(b(!0),N(R,null,F(d.myCardHand,(i,l)=>(b(),w(g,{key:l},{default:o(()=>[s(G,{src:r.cardTypes.find(n=>n.type===i&&n.color===(d.myColor||"white")).image,height:"100",width:"100"},null,8,["src"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):D("",!0),s(f,{class:"game-board"},{default:o(()=>[s(g,{class:"chess-board-container"},{default:o(()=>[s(m,{gameData:r.gameData,gameId:r.gameId,onGameUpdated:d.endPlayerTurn},null,8,["gameData","gameId","onGameUpdated"])]),_:1})]),_:1}),r.gameData?(b(),w(f,{key:1,cols:"3",class:"game-mangement"},{default:o(()=>[e[10]||(e[10]=h("br",null,null,-1)),s(g,null,{default:o(()=>[s(f,{class:"d-flex justify-center"},{default:o(()=>e[2]||(e[2]=[h("h2",null,"Options",-1)])),_:1})]),_:1}),s(g,null,{default:o(()=>[s(f,{class:"d-flex justify-center"},{default:o(()=>e[3]||(e[3]=[h("h4",null,"(Placeholders for now)",-1)])),_:1})]),_:1}),s(g,{class:"d-flex justify-center"},{default:o(()=>[s(_,null,{default:o(()=>e[4]||(e[4]=[k(" Offer Draw ")])),_:1}),s(_,null,{default:o(()=>e[5]||(e[5]=[k(" Resign ")])),_:1}),s(_,null,{default:o(()=>e[6]||(e[6]=[k(" Surrender ")])),_:1})]),_:1}),e[11]||(e[11]=h("br",null,null,-1)),e[12]||(e[12]=h("br",null,null,-1)),s(g,null,{default:o(()=>[e[8]||(e[8]=k(" Chat messages will be displayed here. ")),s(f,{cols:"12"},{default:o(()=>[s(U,{label:"Chat is currently disabled... Stay tuned",outlined:""}),s(_,{color:"primary",disabled:!0},{default:o(()=>e[7]||(e[7]=[k("Send")])),_:1})]),_:1})]),_:1}),s(g,null,{default:o(()=>[s(f,{cols:"12"},{default:o(()=>e[9]||(e[9]=[h("p",null,[h("strong",null,"Player 1:"),k(" Hello!")],-1),h("p",null,[h("strong",null,"Player 2:"),k(" Hi there!")],-1)])),_:1})]),_:1})]),_:1})):D("",!0)]),_:1})}const Y=z(J,[["render",K],["__scopeId","data-v-fa7275ad"]]);export{Y as default};
