import{I as je,u as Ie,D as Ke,m as ze,E as We,M as ie,r as Ve,q as qe,C as Je,F as Ee}from"./VTextField-Cb1y2RM5.js";import{g as Me,p as Ae,a as Qe,b as He,c as P,d as Ze,f as Se,k as ue,y as Ye,E as Y,r as Xe,w as ce,a9 as $e,aa as e2,n as t2,Q as i2,H as s2,R as Be,U as n2,D as r2,q as o2,V as he,S as a2,_ as c2,a5 as X,a8 as Fe,a0 as j,a2 as De,ab as l2,a4 as le,$ as u2,a1 as be,a3 as Ge}from"./index-Bhd6YrUw.js";var se={exports:{}},h2=se.exports,Le;function g2(){return Le||(Le=1,function(r,v){(function(p,h){r.exports=h()})(h2,function(){return function(p){var h={};function d(c){if(h[c])return h[c].exports;var C=h[c]={i:c,l:!1,exports:{}};return p[c].call(C.exports,C,C.exports,d),C.l=!0,C.exports}return d.m=p,d.c=h,d.d=function(c,C,w){d.o(c,C)||Object.defineProperty(c,C,{enumerable:!0,get:w})},d.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},d.t=function(c,C){if(1&C&&(c=d(c)),8&C||4&C&&typeof c=="object"&&c&&c.__esModule)return c;var w=Object.create(null);if(d.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:c}),2&C&&typeof c!="string")for(var E in c)d.d(w,E,(function(g){return c[g]}).bind(null,E));return w},d.n=function(c){var C=c&&c.__esModule?function(){return c.default}:function(){return c};return d.d(C,"a",C),C},d.o=function(c,C){return Object.prototype.hasOwnProperty.call(c,C)},d.p="",d(d.s=0)}([function(p,h,d){d.r(h),d.d(h,"Game",function(){return U}),d.d(h,"moves",function(){return xe}),d.d(h,"status",function(){return Te}),d.d(h,"getFen",function(){return Ne}),d.d(h,"move",function(){return Ue}),d.d(h,"aiMove",function(){return Re});const c=["A","B","C","D","E","F","G","H"],C=["1","2","3","4","5","6","7","8"],w={KING_W:"K",QUEEN_W:"Q",ROOK_W:"R",BISHOP_W:"B",KNIGHT_W:"N",PAWN_W:"P",KING_B:"k",QUEEN_B:"q",ROOK_B:"r",BISHOP_B:"b",KNIGHT_B:"n",PAWN_B:"p"},E="black",g="white",B=[0,1,2,3,4],O={0:1,1:2,2:2,3:3,4:3,5:4},x={0:2,1:2,2:4,3:4,4:5,5:5},F={fullMove:1,halfMove:0,enPassant:null,isFinished:!1,checkMate:!1,check:!1,turn:g},T=Object.assign({pieces:{E1:"K",D1:"Q",A1:"R",H1:"R",C1:"B",F1:"B",B1:"N",G1:"N",A2:"P",B2:"P",C2:"P",D2:"P",E2:"P",F2:"P",G2:"P",H2:"P",E8:"k",D8:"q",A8:"r",H8:"r",C8:"b",F8:"b",B8:"n",G8:"n",A7:"p",B7:"p",C7:"p",D7:"p",E7:"p",F7:"p",G7:"p",H7:"p"},castling:{whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}},F),m={UP:{A1:"A2",A2:"A3",A3:"A4",A4:"A5",A5:"A6",A6:"A7",A7:"A8",A8:null,B1:"B2",B2:"B3",B3:"B4",B4:"B5",B5:"B6",B6:"B7",B7:"B8",B8:null,C1:"C2",C2:"C3",C3:"C4",C4:"C5",C5:"C6",C6:"C7",C7:"C8",C8:null,D1:"D2",D2:"D3",D3:"D4",D4:"D5",D5:"D6",D6:"D7",D7:"D8",D8:null,E1:"E2",E2:"E3",E3:"E4",E4:"E5",E5:"E6",E6:"E7",E7:"E8",E8:null,F1:"F2",F2:"F3",F3:"F4",F4:"F5",F5:"F6",F6:"F7",F7:"F8",F8:null,G1:"G2",G2:"G3",G3:"G4",G4:"G5",G5:"G6",G6:"G7",G7:"G8",G8:null,H1:"H2",H2:"H3",H3:"H4",H4:"H5",H5:"H6",H6:"H7",H7:"H8",H8:null},DOWN:{A1:null,A2:"A1",A3:"A2",A4:"A3",A5:"A4",A6:"A5",A7:"A6",A8:"A7",B1:null,B2:"B1",B3:"B2",B4:"B3",B5:"B4",B6:"B5",B7:"B6",B8:"B7",C1:null,C2:"C1",C3:"C2",C4:"C3",C5:"C4",C6:"C5",C7:"C6",C8:"C7",D1:null,D2:"D1",D3:"D2",D4:"D3",D5:"D4",D6:"D5",D7:"D6",D8:"D7",E1:null,E2:"E1",E3:"E2",E4:"E3",E5:"E4",E6:"E5",E7:"E6",E8:"E7",F1:null,F2:"F1",F3:"F2",F4:"F3",F5:"F4",F6:"F5",F7:"F6",F8:"F7",G1:null,G2:"G1",G3:"G2",G4:"G3",G5:"G4",G6:"G5",G7:"G6",G8:"G7",H1:null,H2:"H1",H3:"H2",H4:"H3",H5:"H4",H6:"H5",H7:"H6",H8:"H7"},LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A1",B2:"A2",B3:"A3",B4:"A4",B5:"A5",B6:"A6",B7:"A7",B8:"A8",C1:"B1",C2:"B2",C3:"B3",C4:"B4",C5:"B5",C6:"B6",C7:"B7",C8:"B8",D1:"C1",D2:"C2",D3:"C3",D4:"C4",D5:"C5",D6:"C6",D7:"C7",D8:"C8",E1:"D1",E2:"D2",E3:"D3",E4:"D4",E5:"D5",E6:"D6",E7:"D7",E8:"D8",F1:"E1",F2:"E2",F3:"E3",F4:"E4",F5:"E5",F6:"E6",F7:"E7",F8:"E8",G1:"F1",G2:"F2",G3:"F3",G4:"F4",G5:"F5",G6:"F6",G7:"F7",G8:"F8",H1:"G1",H2:"G2",H3:"G3",H4:"G4",H5:"G5",H6:"G6",H7:"G7",H8:"G8"},RIGHT:{A1:"B1",A2:"B2",A3:"B3",A4:"B4",A5:"B5",A6:"B6",A7:"B7",A8:"B8",B1:"C1",B2:"C2",B3:"C3",B4:"C4",B5:"C5",B6:"C6",B7:"C7",B8:"C8",C1:"D1",C2:"D2",C3:"D3",C4:"D4",C5:"D5",C6:"D6",C7:"D7",C8:"D8",D1:"E1",D2:"E2",D3:"E3",D4:"E4",D5:"E5",D6:"E6",D7:"E7",D8:"E8",E1:"F1",E2:"F2",E3:"F3",E4:"F4",E5:"F5",E6:"F6",E7:"F7",E8:"F8",F1:"G1",F2:"G2",F3:"G3",F4:"G4",F5:"G5",F6:"G6",F7:"G7",F8:"G8",G1:"H1",G2:"H2",G3:"H3",G4:"H4",G5:"H5",G6:"H6",G7:"H7",G8:"H8",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A2",B2:"A3",B3:"A4",B4:"A5",B5:"A6",B6:"A7",B7:"A8",B8:null,C1:"B2",C2:"B3",C3:"B4",C4:"B5",C5:"B6",C6:"B7",C7:"B8",C8:null,D1:"C2",D2:"C3",D3:"C4",D4:"C5",D5:"C6",D6:"C7",D7:"C8",D8:null,E1:"D2",E2:"D3",E3:"D4",E4:"D5",E5:"D6",E6:"D7",E7:"D8",E8:null,F1:"E2",F2:"E3",F3:"E4",F4:"E5",F5:"E6",F6:"E7",F7:"E8",F8:null,G1:"F2",G2:"F3",G3:"F4",G4:"F5",G5:"F6",G6:"F7",G7:"F8",G8:null,H1:"G2",H2:"G3",H3:"G4",H4:"G5",H5:"G6",H6:"G7",H7:"G8",H8:null},DOWN_RIGHT:{A1:null,A2:"B1",A3:"B2",A4:"B3",A5:"B4",A6:"B5",A7:"B6",A8:"B7",B1:null,B2:"C1",B3:"C2",B4:"C3",B5:"C4",B6:"C5",B7:"C6",B8:"C7",C1:null,C2:"D1",C3:"D2",C4:"D3",C5:"D4",C6:"D5",C7:"D6",C8:"D7",D1:null,D2:"E1",D3:"E2",D4:"E3",D5:"E4",D6:"E5",D7:"E6",D8:"E7",E1:null,E2:"F1",E3:"F2",E4:"F3",E5:"F4",E6:"F5",E7:"F6",E8:"F7",F1:null,F2:"G1",F3:"G2",F4:"G3",F5:"G4",F6:"G5",F7:"G6",F8:"G7",G1:null,G2:"H1",G3:"H2",G4:"H3",G5:"H4",G6:"H5",G7:"H6",G8:"H7",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_RIGHT:{A1:"B2",A2:"B3",A3:"B4",A4:"B5",A5:"B6",A6:"B7",A7:"B8",A8:null,B1:"C2",B2:"C3",B3:"C4",B4:"C5",B5:"C6",B6:"C7",B7:"C8",B8:null,C1:"D2",C2:"D3",C3:"D4",C4:"D5",C5:"D6",C6:"D7",C7:"D8",C8:null,D1:"E2",D2:"E3",D3:"E4",D4:"E5",D5:"E6",D6:"E7",D7:"E8",D8:null,E1:"F2",E2:"F3",E3:"F4",E4:"F5",E5:"F6",E6:"F7",E7:"F8",E8:null,F1:"G2",F2:"G3",F3:"G4",F4:"G5",F5:"G6",F6:"G7",F7:"G8",F8:null,G1:"H2",G2:"H3",G3:"H4",G4:"H5",G5:"H6",G6:"H7",G7:"H8",G8:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},DOWN_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:null,B2:"A1",B3:"A2",B4:"A3",B5:"A4",B6:"A5",B7:"A6",B8:"A7",C1:null,C2:"B1",C3:"B2",C4:"B3",C5:"B4",C6:"B5",C7:"B6",C8:"B7",D1:null,D2:"C1",D3:"C2",D4:"C3",D5:"C4",D6:"C5",D7:"C6",D8:"C7",E1:null,E2:"D1",E3:"D2",E4:"D3",E5:"D4",E6:"D5",E7:"D6",E8:"D7",F1:null,F2:"E1",F3:"E2",F4:"E3",F5:"E4",F6:"E5",F7:"E6",F8:"E7",G1:null,G2:"F1",G3:"F2",G4:"F3",G5:"F4",G6:"F5",G7:"F6",G8:"F7",H1:null,H2:"G1",H3:"G2",H4:"G3",H5:"G4",H6:"G5",H7:"G6",H8:"G7"}},I=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,0,1,0,0,1,0,.5],[.5,0,0,-2,-2,0,0,.5],[0,0,0,0,0,0,0,0]],K=[[-4,-3,-2,-2,-2,-2,-3,-4],[-3,-2,0,0,0,0,-2,-3],[-2,0,1,1.5,1.5,1,0,-2],[-2,.5,1.5,2,2,1.5,.5,-2],[-2,0,1.5,2,2,1.5,0,-2],[-2,.5,1,1.5,1.5,1,.5,-2],[-3,-2,0,.5,.5,0,-2,-3],[-4,-3,-2,-2,-2,-2,-3,-4]],z=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],N=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],H=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],W=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],$={P:I.slice().reverse(),p:I,N:K.slice().reverse(),n:K,B:z.slice().reverse(),b:z,R:N.slice().reverse(),r:N,K:H.slice().reverse(),k:H,Q:W.slice().reverse(),q:W};function _(l){return m.UP[l]}function M(l){return m.DOWN[l]}function b(l){return m.LEFT[l]}function G(l){return m.RIGHT[l]}function S(l){return m.UP_LEFT[l]}function f(l){return m.UP_RIGHT[l]}function k(l){return m.DOWN_LEFT[l]}function D(l){return m.DOWN_RIGHT[l]}function V(l){const t=S(l);return t?_(t):null}function q(l){const t=S(l);return t?b(t):null}function ge(l){const t=f(l);return t?_(t):null}function de(l){const t=f(l);return t?G(t):null}function Ce(l){const t=k(l);return t?M(t):null}function fe(l){const t=k(l);return t?b(t):null}function ve(l){const t=D(l);return t?M(t):null}function pe(l){const t=D(l);return t?G(t):null}function we(l,t){return t===g?m.UP[l]:m.DOWN[l]}function ne(l,t){return t===g?m.UP_LEFT[l]:m.DOWN_RIGHT[l]}function re(l,t){return t===g?m.UP_RIGHT[l]:m.DOWN_LEFT[l]}function me(l,t){return t===g?m.DOWN_LEFT[l]:m.UP_RIGHT[l]}function Pe(l,t){return t===g?m.DOWN_RIGHT[l]:m.UP_LEFT[l]}function J(l){return{k:10,q:9,r:5,b:3,n:3,p:1}[l.toLowerCase()]||0}function ee(l){return typeof l=="string"&&l.match("^[a-hA-H]{1}[1-8]{1}$")}const oe=-1e3,ae=1e3;class te{constructor(t=JSON.parse(JSON.stringify(T))){if(typeof t=="object")this.configuration=Object.assign({},F,t);else{if(typeof t!="string")throw new Error(`Unknown configuration type ${typeof config}.`);this.configuration=Object.assign({},F,function(i=""){const[s,n,e,a,u,o]=i.split(" "),y={pieces:Object.fromEntries(s.split("/").flatMap((L,Q)=>{let A=0;return L.split("").reduce((Z,R)=>{const ke=R.match(/k|b|q|n|p|r/i);ke&&(Z.push([`${c[A]}${C[7-Q]}`,ke[0]]),A+=1);const ye=R.match(/[1-8]/);return ye&&(A+=Number(ye)),Z},[])}))};return y.turn=n==="b"?E:g,y.castling={whiteLong:!1,whiteShort:!1,blackLong:!1,blackShort:!1},e.includes("K")&&(y.castling.whiteShort=!0),e.includes("k")&&(y.castling.blackShort=!0),e.includes("Q")&&(y.castling.whiteLong=!0),e.includes("q")&&(y.castling.blackLong=!0),ee(a)&&(y.enPassant=a.toUpperCase()),y.halfMove=parseInt(u),y.fullMove=parseInt(o),y}(t))}this.configuration.castling||(this.configuration.castling={whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}),this.history=[]}getAttackingFields(t=this.getPlayingColor()){let i=[];for(const s in this.configuration.pieces){const n=this.getPiece(s);this.getPieceColor(n)===t&&(i=[...i,...this.getPieceMoves(n,s)])}return i}isAttackingKing(t=this.getPlayingColor()){let i=null;for(const s in this.configuration.pieces){const n=this.getPiece(s);if(this.isKing(n)&&this.getPieceColor(n)!==t){i=s;break}}return this.isPieceUnderAttack(i)}isPieceUnderAttack(t){const i=this.getPieceOnLocationColor(t),s=this.getEnemyColor(i);let n=!1,e=t,a=0;for(;_(e)&&!n;){e=_(e),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isRook(o)||this.isQueen(o)||this.isKing(o)&&a===1)&&(n=!0),o)break}for(e=t,a=0;M(e)&&!n;){e=M(e),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isRook(o)||this.isQueen(o)||this.isKing(o)&&a===1)&&(n=!0),o)break}for(e=t,a=0;b(e)&&!n;){e=b(e),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isRook(o)||this.isQueen(o)||this.isKing(o)&&a===1)&&(n=!0),o)break}for(e=t,a=0;G(e)&&!n;){e=G(e),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isRook(o)||this.isQueen(o)||this.isKing(o)&&a===1)&&(n=!0),o)break}for(e=t,a=0;re(e,i)&&!n;){e=re(e,i),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isBishop(o)||this.isQueen(o)||a===1&&(this.isKing(o)||this.isPawn(o)))&&(n=!0),o)break}for(e=t,a=0;ne(e,i)&&!n;){e=ne(e,i),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isBishop(o)||this.isQueen(o)||a===1&&(this.isKing(o)||this.isPawn(o)))&&(n=!0),o)break}for(e=t,a=0;Pe(e,i)&&!n;){e=Pe(e,i),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isBishop(o)||this.isQueen(o)||this.isKing(o)&&a===1)&&(n=!0),o)break}for(e=t,a=0;me(e,i)&&!n;){e=me(e,i),a++;const o=this.getPiece(e);if(o&&this.getPieceColor(o)===s&&(this.isBishop(o)||this.isQueen(o)||this.isKing(o)&&a===1)&&(n=!0),o)break}e=ge(t);let u=this.getPiece(e);return u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),e=de(t),u=this.getPiece(e),u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),e=q(t),u=this.getPiece(e),u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),e=V(t),u=this.getPiece(e),u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),e=Ce(t),u=this.getPiece(e),u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),e=fe(t),u=this.getPiece(e),u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),e=ve(t),u=this.getPiece(e),u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),e=pe(t),u=this.getPiece(e),u&&this.getPieceColor(u)===s&&this.isKnight(u)&&(n=!0),n}hasPlayingPlayerCheck(){return this.isAttackingKing(this.getNonPlayingColor())}hasNonPlayingPlayerCheck(){return this.isAttackingKing(this.getPlayingColor())}getLowestValuePieceAttackingLocation(t,i=this.getPlayingColor()){let s=null;for(const n in this.configuration.pieces){const e=this.getPiece(n);this.getPieceColor(e)===i&&this.getPieceMoves(e,n).map(a=>{a===t&&(s===null||J(e)<s)&&(s=J(e))})}return s}getMoves(t=this.getPlayingColor(),i=null){const s={};let n=0;for(const u in this.configuration.pieces){const o=this.getPiece(u);if(this.getPieceColor(o)===t){const y=this.getPieceMoves(o,u);y.length&&n++,Object.assign(s,{[u]:y})}}const e=this.getAttackingFields(this.getNonPlayingColor());if(this.isLeftCastlingPossible(e)&&(this.isPlayingWhite()&&s.E1.push("C1"),this.isPlayingBlack()&&s.E8.push("C8")),this.isRightCastlingPossible(e)&&(this.isPlayingWhite()&&s.E1.push("G1"),this.isPlayingBlack()&&s.E8.push("G8")),i&&n>i)return s;const a={};for(const u in s)s[u].map(o=>{const y={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling)},L=new te(y);L.move(u,o),(this.isPlayingWhite()&&!L.isAttackingKing(E)||this.isPlayingBlack()&&!L.isAttackingKing(g))&&(a[u]||(a[u]=[]),a[u].push(o))});return Object.keys(a).length||(this.configuration.isFinished=!0,this.hasPlayingPlayerCheck()&&(this.configuration.checkMate=!0)),a}isLeftCastlingPossible(t){if(this.isPlayingWhite()&&!this.configuration.castling.whiteLong||this.isPlayingBlack()&&!this.configuration.castling.blackLong)return!1;let i=null;if(this.isPlayingWhite()&&this.getPiece("E1")==="K"&&this.getPiece("A1")==="R"&&!t.includes("E1")?i="E1":this.isPlayingBlack()&&this.getPiece("E8")==="k"&&this.getPiece("A8")==="r"&&!t.includes("E8")&&(i="E8"),!i)return!1;let s=b(i);return!this.getPiece(s)&&!t.includes(s)&&(s=b(s),!this.getPiece(s)&&!t.includes(s)&&(s=b(s),!this.getPiece(s)))}isRightCastlingPossible(t){if(this.isPlayingWhite()&&!this.configuration.castling.whiteShort||this.isPlayingBlack()&&!this.configuration.castling.blackShort)return!1;let i=null;if(this.isPlayingWhite()&&this.getPiece("E1")==="K"&&this.getPiece("H1")==="R"&&!t.includes("E1")?i="E1":this.isPlayingBlack()&&this.getPiece("E8")==="k"&&this.getPiece("H8")==="r"&&!t.includes("E8")&&(i="E8"),!i)return!1;let s=G(i);return!this.getPiece(s)&&!t.includes(s)&&(s=G(s),!this.getPiece(s)&&!t.includes(s))}getPieceMoves(t,i){return this.isPawn(t)?this.getPawnMoves(t,i):this.isKnight(t)?this.getKnightMoves(t,i):this.isRook(t)?this.getRookMoves(t,i):this.isBishop(t)?this.getBishopMoves(t,i):this.isQueen(t)?this.getQueenMoves(t,i):this.isKing(t)?this.getKingMoves(t,i):[]}isPawn(t){return t.toUpperCase()==="P"}isKnight(t){return t.toUpperCase()==="N"}isRook(t){return t.toUpperCase()==="R"}isBishop(t){return t.toUpperCase()==="B"}isQueen(t){return t.toUpperCase()==="Q"}isKing(t){return t.toUpperCase()==="K"}getPawnMoves(t,i){const s=[],n=this.getPieceColor(t);let e=we(i,n);return e&&!this.getPiece(e)&&(s.push(e),e=we(e,n),function(a,u){return a===g&&u[1]==="2"||a===E&&u[1]==="7"}(n,i)&&e&&!this.getPiece(e)&&s.push(e)),e=ne(i,n),e&&(this.getPiece(e)&&this.getPieceOnLocationColor(e)!==n||e===this.configuration.enPassant)&&s.push(e),e=re(i,n),e&&(this.getPiece(e)&&this.getPieceOnLocationColor(e)!==n||e===this.configuration.enPassant)&&s.push(e),s}getKnightMoves(t,i){const s=[],n=this.getPieceColor(t);let e=ge(i);return e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=de(i),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=V(i),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=q(i),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=fe(i),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=Ce(i),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=pe(i),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=ve(i),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),s}getRookMoves(t,i){const s=[],n=this.getPieceColor(t);let e=i;for(;_(e);){e=_(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}for(e=i;M(e);){e=M(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}for(e=i;G(e);){e=G(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}for(e=i;b(e);){e=b(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}return s}getBishopMoves(t,i){const s=[],n=this.getPieceColor(t);let e=i;for(;S(e);){e=S(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}for(e=i;f(e);){e=f(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}for(e=i;k(e);){e=k(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}for(e=i;D(e);){e=D(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==n&&s.push(e),a)break}return s}getQueenMoves(t,i){return[...this.getRookMoves(t,i),...this.getBishopMoves(t,i)]}getKingMoves(t,i){const s=[],n=this.getPieceColor(t);let e=i;return e=_(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=i,e=G(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=i,e=M(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=i,e=b(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=i,e=S(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=i,e=f(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=i,e=k(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),e=i,e=D(e),e&&this.getPieceOnLocationColor(e)!==n&&s.push(e),s}getPieceColor(t){return t.toUpperCase()===t?g:E}getPieceOnLocationColor(t){const i=this.getPiece(t);return i?i.toUpperCase()===i?g:E:null}getPiece(t){return this.configuration.pieces[t]}setPiece(t,i){if(!function(s){return Object.values(w).includes(s)}(i))throw new Error("Invalid piece "+i);if(!ee(t))throw new Error("Invalid location "+t);this.configuration.pieces[t.toUpperCase()]=i}removePiece(t){if(!ee(t))throw new Error("Invalid location "+t);delete this.configuration.pieces[t.toUpperCase()]}isEmpty(t){if(!ee(t))throw new Error("Invalid location "+t);return!this.configuration.pieces[t.toUpperCase()]}getEnemyColor(t){return t===g?E:g}getPlayingColor(){return this.configuration.turn}getNonPlayingColor(){return this.isPlayingWhite()?E:g}isPlayingWhite(){return this.configuration.turn===g}isPlayingBlack(){return this.configuration.turn===E}addMoveToHistory(t,i){this.history.push({from:t,to:i,configuration:JSON.parse(JSON.stringify(this.configuration))})}move(t,i){const s=this.getPiece(t),n=this.getPiece(i);if(!s)throw new Error("There is no piece at "+t);var e,a;if(Object.assign(this.configuration.pieces,{[i]:s}),delete this.configuration.pieces[t],this.isPlayingWhite()&&this.isPawn(s)&&i[1]==="8"&&Object.assign(this.configuration.pieces,{[i]:"Q"}),this.isPlayingBlack()&&this.isPawn(s)&&i[1]==="1"&&Object.assign(this.configuration.pieces,{[i]:"q"}),this.isPawn(s)&&i===this.configuration.enPassant&&delete this.configuration.pieces[e=i,a=this.getPlayingColor(),a===g?m.DOWN[e]:m.UP[e]],this.isPawn(s)&&this.isPlayingWhite()&&t[1]==="2"&&i[1]==="4"?this.configuration.enPassant=t[0]+"3":this.isPawn(s)&&this.isPlayingBlack()&&t[1]==="7"&&i[1]==="5"?this.configuration.enPassant=t[0]+"6":this.configuration.enPassant=null,t==="E1"&&Object.assign(this.configuration.castling,{whiteLong:!1,whiteShort:!1}),t==="E8"&&Object.assign(this.configuration.castling,{blackLong:!1,blackShort:!1}),t==="A1"&&Object.assign(this.configuration.castling,{whiteLong:!1}),t==="H1"&&Object.assign(this.configuration.castling,{whiteShort:!1}),t==="A8"&&Object.assign(this.configuration.castling,{blackLong:!1}),t==="H8"&&Object.assign(this.configuration.castling,{blackShort:!1}),this.isKing(s)){if(t==="E1"&&i==="C1")return this.move("A1","D1");if(t==="E8"&&i==="C8")return this.move("A8","D8");if(t==="E1"&&i==="G1")return this.move("H1","F1");if(t==="E8"&&i==="G8")return this.move("H8","F8")}this.configuration.turn=this.isPlayingWhite()?E:g,this.isPlayingWhite()&&this.configuration.fullMove++,this.configuration.halfMove++,(n||this.isPawn(s))&&(this.configuration.halfMove=0)}exportJson(){return{moves:this.getMoves(),pieces:this.configuration.pieces,turn:this.configuration.turn,isFinished:this.configuration.isFinished,check:this.hasPlayingPlayerCheck(),checkMate:this.configuration.checkMate,castling:this.configuration.castling,enPassant:this.configuration.enPassant,halfMove:this.configuration.halfMove,fullMove:this.configuration.fullMove}}calculateAiMove(t){return this.calculateAiMoves(t)[0]}calculateAiMoves(t){if(t=parseInt(t),!B.includes(t))throw new Error(`Invalid level ${t}. You can choose ${B.join(",")}`);this.shouldIncreaseLevel()&&t++;const i=[],s=this.calculateScore(this.getPlayingColor()),n=this.getMoves();for(const e in n)n[e].map(a=>{const u=this.getTestBoard(),o=!!u.getPiece(a);u.move(e,a),i.push({from:e,to:a,score:u.testMoveScores(this.getPlayingColor(),t,o,o?u.calculateScore(this.getPlayingColor()):s,a).score+u.calculateScoreByPiecesLocation(this.getPlayingColor())+Math.floor(Math.random()*(this.configuration.halfMove>10?this.configuration.halfMove-10:1)*10)/10})});return i.sort((e,a)=>e.score<a.score?1:e.score>a.score?-1:0),i}shouldIncreaseLevel(){return this.getIngamePiecesValue()<50}getIngamePiecesValue(){let t=0;for(const i in this.configuration.pieces)t+=J(this.getPiece(i));return t}getTestBoard(){const t={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling),turn:this.configuration.turn,enPassant:this.configuration.enPassant};return new te(t)}testMoveScores(t,i,s,n,e,a=1){let u=null;if(a<x[i]&&this.hasPlayingPlayerCheck()?u=this.getMoves(this.getPlayingColor()):(a<O[i]||s&&a<x[i])&&(u=this.getMoves(this.getPlayingColor(),5)),this.configuration.isFinished)return{score:this.calculateScore(t)+(this.getPlayingColor()===t?a:-a),max:!0};if(!u)return n!==null?{score:n,max:!1}:{score:this.calculateScore(t),max:!1};let o=this.getPlayingColor()===t?oe:ae,y=!1;for(const L in u)y||u[L].map(Q=>{if(y)return;const A=this.getTestBoard(),Z=!!A.getPiece(Q);if(A.move(L,Q),A.hasNonPlayingPlayerCheck())return;const R=A.testMoveScores(t,i,Z,Z?A.calculateScore(t):n,Q,a+1);R.max&&(y=!0),o=this.getPlayingColor()===t?Math.max(o,R.score):Math.min(o,R.score)});return{score:o,max:!1}}calculateScoreByPiecesLocation(t=this.getPlayingColor()){const i={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7};let s=0;for(const n in this.configuration.pieces){const e=this.getPiece(n);if($[e]){const a=$[e][n[1]-1][i[n[0]]];s+=.5*(this.getPieceColor(e)===t?a:-a)}}return s}calculateScore(t=this.getPlayingColor()){let i=0;if(this.configuration.checkMate)return this.getPlayingColor()===t?oe:ae;if(this.configuration.isFinished)return this.getPlayingColor()===t?ae:oe;for(const s in this.configuration.pieces){const n=this.getPiece(s);this.getPieceColor(n)===t?i+=10*J(n):i-=10*J(n)}return i}}class U{constructor(t){this.board=new te(t)}move(t,i){t=t.toUpperCase(),i=i.toUpperCase();const s=this.board.getMoves();if(!s[t]||!s[t].includes(i))throw new Error(`Invalid move from ${t} to ${i} for ${this.board.getPlayingColor()}`);return this.board.addMoveToHistory(t,i),this.board.move(t,i),{[t]:i}}moves(t=null){return(t?this.board.getMoves()[t.toUpperCase()]:this.board.getMoves())||[]}setPiece(t,i){this.board.setPiece(t,i)}removePiece(t){this.board.removePiece(t)}aiMove(t=2){const i=this.board.calculateAiMove(t);return this.move(i.from,i.to)}getHistory(t=!1){return t?this.board.history.reverse():this.board.history}printToConsole(){(function(t){process.stdout.write(`
`);let i=g;Object.assign([],C).reverse().map(s=>{process.stdout.write(""+s),c.map(n=>{switch(t.pieces[`${n}${s}`]){case"K":process.stdout.write("♚");break;case"Q":process.stdout.write("♛");break;case"R":process.stdout.write("♜");break;case"B":process.stdout.write("♝");break;case"N":process.stdout.write("♞");break;case"P":process.stdout.write("♟");break;case"k":process.stdout.write("♔");break;case"q":process.stdout.write("♕");break;case"r":process.stdout.write("♖");break;case"b":process.stdout.write("♗");break;case"n":process.stdout.write("♘");break;case"p":process.stdout.write("♙");break;default:process.stdout.write(i===g?"█":"░")}i=i===g?E:g}),i=i===g?E:g,process.stdout.write(`
`)}),process.stdout.write(" "),c.map(s=>{process.stdout.write(""+s)}),process.stdout.write(`
`)})(this.board.configuration)}exportJson(){return this.board.exportJson()}exportFEN(){return function(t){let i="";Object.assign([],C).reverse().map(u=>{let o=0;u<8&&(i+="/"),c.map(y=>{const L=t.pieces[`${y}${u}`];L?(o&&(i+=o.toString(),o=0),i+=L):o++}),i+=""+(o||"")}),i+=t.turn===g?" w ":" b ";const{whiteShort:s,whiteLong:n,blackLong:e,blackShort:a}=t.castling;return n||s||e||a?(s&&(i+="K"),n&&(i+="Q"),a&&(i+="k"),e&&(i+="q")):i+="-",i+=" "+(t.enPassant?t.enPassant.toLowerCase():"-"),i+=" "+t.halfMove,i+=" "+t.fullMove,i}(this.board.configuration)}}function xe(l){if(!l)throw new Error("Configuration param required.");return new U(l).moves()}function Te(l){if(!l)throw new Error("Configuration param required.");return new U(l).exportJson()}function Ne(l){if(!l)throw new Error("Configuration param required.");return new U(l).exportFEN()}function Ue(l,t,i){if(!l)throw new Error("Configuration param required.");const s=new U(l);return s.move(t,i),typeof l=="object"?s.exportJson():s.exportFEN()}function Re(l,t=2){if(!l)throw new Error("Configuration param required.");const i=new U(l).board.calculateAiMove(t);return{[i.from]:i.to}}}])})}(se)),se.exports}var d2=g2();const C2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Gyalog%20(fehér)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_plt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='%23FFF'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='miter'%3e%3cpath%20d='M%2022.5,9%20C%2020.29,9%2018.5,10.79%2018.5,13%20C%2018.5,13.89%2018.79,14.71%2019.28,15.38%20C%2017.33,16.5%2016,18.59%2016,21%20C%2016,23.03%2016.94,24.84%2018.41,26.03%20C%2015.41,27.09%2011,31.58%2011,39.5%20L%2034,39.5%20C%2034,31.58%2029.59,27.09%2026.59,26.03%20C%2028.06,24.84%2029,23.03%2029,21%20C%2029,18.59%2027.67,16.5%2025.72,15.38%20C%2026.21,14.71%2026.5,13.89%2026.5,13%20C%2026.5,10.79%2024.71,9%2022.5,9%20Z'/%3e%3c/g%3e%3c/svg%3e",f2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Bástya%20(fehér)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_rlt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23FFF'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20test%20--%3e%3cpath%20d='%20M%2011,14%20L%2011,9%20L%2015,9%20L%2015,11%20L%2020,11%20L%2020,9%20L%2025,9%20L%2025,11%20L%2030,11%20L%2030,9%20L%2034,9%20L%2034,14%20L%2031,17%20L%2031,29.5%20L%2033,32%20L%2033,36%20L%2012,36%20L%2012,32%20L%2014,29.5%20L%2014,17%20Z%20'/%3e%3c!--%20talp%20--%3e%3cpath%20d='M%209,39%20L%2036,39%20L%2036,36%20L%209,36%20L%209,39%20z'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23000'%20stroke-linecap='round'%3e%3cline%20stroke-width='1.2'%20x1='11'%20y1='14.0'%20x2='34'%20y2='14.0'/%3e%3cline%20stroke-width='0.8'%20x1='14'%20y1='17.0'%20x2='31'%20y2='17.0'/%3e%3cline%20stroke-width='0.8'%20x1='14'%20y1='29.5'%20x2='31'%20y2='29.5'/%3e%3cline%20stroke-width='1.2'%20x1='12'%20y1='32.0'%20x2='33'%20y2='32.0'/%3e%3c/g%3e%3c/svg%3e",v2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Huszár%20(fehér)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_nlt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23FFF'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20test%20--%3e%3cpath%20d='M%2022,10%20C%2032.5,11%2038.5,18%2038,39%20L%2015,39%20C%2015,30%2025,32.5%2023,18'/%3e%3c!--%20fej%20--%3e%3cpath%20d='M%2024,18%20C%2024.38,20.91%2018.45,25.37%2016,27%20C%2013,29%2013.18,31.34%2011,31%20C%209.958,30.06%2012.41,27.96%2011,28%20C%2010,28%2011.19,29.23%2010,30%20C%209,30%205.997,31%206,26%20C%206,24%2012,14%2012,14%20C%2012,14%2013.89,12.1%2014,10.5%20C%2013.27,9.506%2013.5,8.5%2013.5,7.5%20C%2014.5,6.5%2016.5,10%2016.5,10%20L%2018.5,10%20C%2018.5,10%2019.28,8.008%2021,7%20C%2022,7%2022,10%2022,10'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='%23000'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20orr%20--%3e%3cpath%20d='M%209.5,25.5%20A%200.5,0.5,0%201,1%208.5,25.5%20A%200.5,0.5,0%201,1%209.5,25.5%20Z'/%3e%3c!--%20szem%20--%3e%3cpath%20d='M%2015.25,14.2%20A%200.5,1.5,30%201,1%2013.75,16.8%20A%200.5,1.5,30%201,1%2015.25,14.2%20Z'/%3e%3c/g%3e%3c/svg%3e",p2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Futó%20(fehér)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_blt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23FFF'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20bojt%20--%3e%3ccircle%20cx='22.5'%20cy='8'%20r='2.5'/%3e%3c!--%20test%20--%3e%3cpath%20d='M%2015,32%20C%2017.5,34.5%2027.5,34.5%2030,32%20C%2030.5,30.5%2030,30%2030,30%20C%2030,27.5%2027.5,26%2027.5,26%20C%2033,24.5%2033.5,14.5%2022.5,10.5%20C%2011.5,14.5%2012,24.5%2017.5,26%20C%2017.5,26%2015,27.5%2015,30%20C%2015,30%2014.5,30.5%2015,32%20Z'/%3e%3c!--%20talp%20--%3e%3cpath%20d='M%209,36%20C%2012.39,35.03%2019.11,36.43%2022.5,34%20C%2025.89,36.43%2032.61,35.03%2036,36%20C%2036,36%2037.65,36.54%2039,38%20C%2038.32,38.97%2037.35,38.99%2036,38.5%20C%2032.61,37.53%2025.89,38.96%2022.5,37.5%20C%2019.11,38.96%2012.39,37.53%209,38.5%20C%207.646,38.99%206.677,38.97%206,38%20C%207.354,36.06%209,36%209,36%20Z'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3cpath%20d='M%2017.5,26%20L%2027.5,26'/%3e%3cpath%20d='M%2015.0,30%20L%2030.0,30'/%3e%3c!--%20kereszt%20--%3e%3cpath%20d='M%2022.5,15%20L%2022.5,22%20M%2020,17.5%20L%2025,17.5'/%3e%3c/g%3e%3c/svg%3e",w2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Vezér%20(fehér)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_qlt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23FFF'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20csápok%20--%3e%3cpath%20d='M%209,26%20C%2017.5,24.5%2030,24.5%2036,26%20L%2038.5,13.5%20L%2031,25%20L%2030.7,10.9%20L%2025.5,24.5%20L%2022.5,10%20L%2019.5,24.5%20L%2014.3,10.9%20L%2014,25%20L%206.5,13.5%20L%209,26%20Z'/%3e%3c!--%20bojtok%20--%3e%3ccircle%20cx='6'%20cy='12'%20r='2'/%3e%3ccircle%20cx='14'%20cy='9'%20r='2'/%3e%3ccircle%20cx='22.5'%20cy='8'%20r='2'/%3e%3ccircle%20cx='31'%20cy='9'%20r='2'/%3e%3ccircle%20cx='39'%20cy='12'%20r='2'/%3e%3c!--%20test%20--%3e%3cpath%20d='M%209,26%20C%209,28%2010.5,28%2011.5,30%20C%2012.5,31.5%2012.5,31%2012,33.5%20C%2010.5,34.5%2010.5,36%2010.5,36%20C%209,37.5%2011,38.5%2011,38.5%20C%2017.5,39.5%2027.5,39.5%2034,38.5%20C%2034,38.5%2036,37.5%2034.5,36%20C%2034.5,36%2034.5,34.5%2033,33.5%20C%2032.5,31%2032.5,31.5%2033.5,30%20C%2034.5,28%2036,28%2036,26%20C%2027.5,24.5%2017.5,24.5%209,26%20Z'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3cpath%20d='M%2011.5,30%20C%2015,29%2030,29%2033.5,30'/%3e%3cpath%20d='M%2012,33.5%20C%2018,32.5%2027,32.5%2033,33.5'/%3e%3c/g%3e%3c/svg%3e",m2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Király%20(fehér)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_klt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23FFF'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20kereszt%20--%3e%3cpath%20fill='none'%20stroke-linecap='round'%20d='M%2022.5,11.63%20L%2022.5,6%20M%2020,8%20L%2025,8'/%3e%3c!--%20tető%20--%3e%3cpath%20d='M%2022.5,25%20C%2022.5,25%2027,17.5%2025.5,14.5%20C%2025.5,14.5%2024.5,12%2022.5,12%20C%2020.5,12%2019.5,14.5%2019.5,14.5%20C%2018,17.5%2022.5,25%2022.5,25'/%3e%3c!--%20test%20--%3e%3cpath%20d='M%2011.5,37%20C%2017,40.5%2027,40.5%2032.5,37%20L%2032.5,30%20C%2032.5,30%2041.5,25.5%2038.5,19.5%20C%2034.5,13%2025,16%2022.5,23.5%20L%2022.5,27%20L%2022.5,23.5%20C%2019,16%209.5,13%206.5,19.5%20C%203.5,25.5%2011.5,29.5%2011.5,29.5%20L%2011.5,37'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3c!--%20talp%20--%3e%3cpath%20d='M%2011.5,30%20C%2017,27%2027,27%2032.5,30'/%3e%3cpath%20d='M%2011.5,33.5%20C%2017,30.5%2027,30.5%2032.5,33.5'/%3e%3cpath%20d='M%2011.5,37%20C%2017,34%2027,34%2032.5,37'/%3e%3c/g%3e%3c/svg%3e",P2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Gyalog%20(fekete)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_pdt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3cg%20fill='%23000'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='miter'%3e%3cpath%20d='M%2022.5,9%20C%2020.29,9%2018.5,10.79%2018.5,13%20C%2018.5,13.89%2018.79,14.71%2019.28,15.38%20C%2017.33,16.5%2016,18.59%2016,21%20C%2016,23.03%2016.94,24.84%2018.41,26.03%20C%2015.41,27.09%2011,31.58%2011,39.5%20L%2034,39.5%20C%2034,31.58%2029.59,27.09%2026.59,26.03%20C%2028.06,24.84%2029,23.03%2029,21%20C%2029,18.59%2027.67,16.5%2025.72,15.38%20C%2026.21,14.71%2026.5,13.89%2026.5,13%20C%2026.5,10.79%2024.71,9%2022.5,9%20Z'/%3e%3c/g%3e%3c/svg%3e",k2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Bástya%20(fekete)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_rdt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23000'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20test%20--%3e%3cpath%20d='%20M%2011,14%20L%2011,9%20L%2015,9%20L%2015,11%20L%2020,11%20L%2020,9%20L%2025,9%20L%2025,11%20L%2030,11%20L%2030,9%20L%2034,9%20L%2034,14%20L%2031,17%20L%2031,29.5%20L%2033,32%20L%2033,36%20L%2012,36%20L%2012,32%20L%2014,29.5%20L%2014,17%20Z%20'/%3e%3c!--%20talp%20--%3e%3cpath%20d='M%209,39%20L%2036,39%20L%2036,36%20L%209,36%20L%209,39%20z'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23FFF'%20stroke-linecap='round'%3e%3cline%20stroke-width='1.2'%20x1='11'%20y1='14.0'%20x2='34'%20y2='14.0'/%3e%3cline%20stroke-width='0.8'%20x1='14'%20y1='17.0'%20x2='31'%20y2='17.0'/%3e%3cline%20stroke-width='0.8'%20x1='14'%20y1='29.5'%20x2='31'%20y2='29.5'/%3e%3cline%20stroke-width='1.2'%20x1='12'%20y1='32.0'%20x2='33'%20y2='32.0'/%3e%3cline%20stroke-width='1.2'%20x1='12'%20y1='35.5'%20x2='33'%20y2='35.5'/%3e%3c/g%3e%3c/svg%3e",y2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Huszár%20(fekete)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_ndt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23000'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20test%20--%3e%3cpath%20d='M%2022,10%20C%2032.5,11%2038.5,18%2038,39%20L%2015,39%20C%2015,30%2025,32.5%2023,18'/%3e%3c!--%20fej%20--%3e%3cpath%20d='M%2024,18%20C%2024.38,20.91%2018.45,25.37%2016,27%20C%2013,29%2013.18,31.34%2011,31%20C%209.958,30.06%2012.41,27.96%2011,28%20C%2010,28%2011.19,29.23%2010,30%20C%209,30%205.997,31%206,26%20C%206,24%2012,14%2012,14%20C%2012,14%2013.89,12.1%2014,10.5%20C%2013.27,9.506%2013.5,8.5%2013.5,7.5%20C%2014.5,6.5%2016.5,10%2016.5,10%20L%2018.5,10%20C%2018.5,10%2019.28,8.008%2021,7%20C%2022,7%2022,10%2022,10'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='%23FFF'%20stroke='%23FFF'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20hát%20--%3e%3cpath%20stroke='none'%20d='M%2024.55,10.4%20L%2024.1,11.85%20L%2024.6,12%20C%2027.75,13%2030.25,14.49%2032.5,18.75%20C%2034.75,23.01%2035.75,29.06%2035.25,39%20L%2035.2,39.5%20L%2037.45,39.5%20L%2037.5,39%20C%2038,28.94%2036.62,22.15%2034.25,17.66%20C%2031.88,13.17%2028.46,11.02%2025.06,10.5%20L%2024.55,10.4%20Z'/%3e%3c!--%20orr%20--%3e%3cpath%20d='M%209.5,25.5%20A%200.5,0.5,0%201,1%208.5,25.5%20A%200.5,0.5,0%201,1%209.5,25.5%20Z'/%3e%3c!--%20szem%20--%3e%3cpath%20d='M%2015.25,14.2%20A%200.5,1.5,30%201,1%2013.75,16.8%20A%200.5,1.5,30%201,1%2015.25,14.2%20Z'/%3e%3c/g%3e%3c/svg%3e",E2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Futó%20(fekete)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_bdt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23000'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20bojt%20--%3e%3ccircle%20cx='22.5'%20cy='8'%20r='2.5'/%3e%3c!--%20test%20--%3e%3cpath%20d='M%2015,32%20C%2017.5,34.5%2027.5,34.5%2030,32%20C%2030.5,30.5%2030,30%2030,30%20C%2030,27.5%2027.5,26%2027.5,26%20C%2033,24.5%2033.5,14.5%2022.5,10.5%20C%2011.5,14.5%2012,24.5%2017.5,26%20C%2017.5,26%2015,27.5%2015,30%20C%2015,30%2014.5,30.5%2015,32%20Z'/%3e%3c!--%20talp%20--%3e%3cpath%20d='M%209,36%20C%2012.39,35.03%2019.11,36.43%2022.5,34%20C%2025.89,36.43%2032.61,35.03%2036,36%20C%2036,36%2037.65,36.54%2039,38%20C%2038.32,38.97%2037.35,38.99%2036,38.5%20C%2032.61,37.53%2025.89,38.96%2022.5,37.5%20C%2019.11,38.96%2012.39,37.53%209,38.5%20C%207.646,38.99%206.677,38.97%206,38%20C%207.354,36.06%209,36%209,36%20Z'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23FFF'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3cpath%20d='M%2017.5,26%20L%2027.5,26'/%3e%3cpath%20d='M%2015.0,30%20L%2030.0,30'/%3e%3c!--%20kereszt%20--%3e%3cpath%20d='M%2022.5,15%20L%2022.5,22%20M%2020,17.5%20L%2025,17.5'/%3e%3c/g%3e%3c/svg%3e",B2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Vezér%20(fekete)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_qdt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23000'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20csápok%20--%3e%3cpath%20d='M%209,26%20C%2017.5,24.5%2030,24.5%2036,26%20L%2038.5,13.5%20L%2031,25%20L%2030.7,10.9%20L%2025.5,24.5%20L%2022.5,10%20L%2019.5,24.5%20L%2014.3,10.9%20L%2014,25%20L%206.5,13.5%20L%209,26%20Z'/%3e%3c!--%20bojtok%20--%3e%3ccircle%20cx='6'%20cy='12'%20r='2'/%3e%3ccircle%20cx='14'%20cy='9'%20r='2'/%3e%3ccircle%20cx='22.5'%20cy='8'%20r='2'/%3e%3ccircle%20cx='31'%20cy='9'%20r='2'/%3e%3ccircle%20cx='39'%20cy='12'%20r='2'/%3e%3c!--%20test%20--%3e%3cpath%20d='M%209,26%20C%209,28%2010.5,28%2011.5,30%20C%2012.5,31.5%2012.5,31%2012,33.5%20C%2010.5,34.5%2010.5,36%2010.5,36%20C%209,37.5%2011,38.5%2011,38.5%20C%2017.5,39.5%2027.5,39.5%2034,38.5%20C%2034,38.5%2036,37.5%2034.5,36%20C%2034.5,36%2034.5,34.5%2033,33.5%20C%2032.5,31%2032.5,31.5%2033.5,30%20C%2034.5,28%2036,28%2036,26%20C%2027.5,24.5%2017.5,24.5%209,26%20Z'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23FFF'%20stroke-width='1.5'%20stroke-linecap='round'%3e%3cpath%20d='M%209,26%20C%2017.5,24.5%2030,24.5%2036,26'/%3e%3cpath%20d='M%2011.5,30%20C%2015,29%2030,29%2033.5,30'/%3e%3cpath%20d='M%2012,33.5%20C%2018,32.5%2027,32.5%2033,33.5'/%3e%3c/g%3e%3c/svg%3e",F2="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Király%20(fekete)%20Eredeti:%20http://en.wikipedia.org/wiki/File:Chess_kdt45.svg%20Felhasználási%20feltételek:%20Nevezd%20meg!%20-%20Így%20add%20tovább!%20(Creative%20Commons)%20Uray%20M.%20János%202013-2018%20--%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='128'%20height='128'%20viewBox='0%200%2045%2045'%3e%3c!--%20alap%20--%3e%3cg%20fill='%23000'%20stroke='%23000'%20stroke-width='1.5'%20stroke-linejoin='round'%3e%3c!--%20kereszt%20--%3e%3cpath%20fill='none'%20stroke-linecap='round'%20d='M%2022.5,11.63%20L%2022.5,6%20M%2020,8%20L%2025,8'/%3e%3c!--%20tető%20--%3e%3cpath%20d='M%2022.5,25%20C%2022.5,25%2027,17.5%2025.5,14.5%20C%2025.5,14.5%2024.5,12%2022.5,12%20C%2020.5,12%2019.5,14.5%2019.5,14.5%20C%2018,17.5%2022.5,25%2022.5,25'/%3e%3c!--%20test%20--%3e%3cpath%20d='M%2011.5,37%20C%2017,40.5%2027,40.5%2032.5,37%20L%2032.5,30%20C%2032.5,30%2041.5,25.5%2038.5,19.5%20C%2034.5,13%2025,16%2022.5,23.5%20L%2022.5,27%20L%2022.5,23.5%20C%2019,16%209.5,13%206.5,19.5%20C%203.5,25.5%2011.5,29.5%2011.5,29.5%20L%2011.5,37'/%3e%3c/g%3e%3c!--%20vonalak%20--%3e%3cg%20fill='none'%20stroke='%23FFF'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c!--%20tető%20--%3e%3cpath%20stroke-linecap='square'%20d='M%2022.5,20%20C%2022.5,20%2025.75,17%2024.5,14.5%20C%2024.5,14.5%2024,13%2022.5,13%20C%2021,13%2020.5,14.5%2020.5,14.5%20C%2019.25,17%2022.5,20%2022.5,20'/%3e%3c!--%20test%20--%3e%3cpath%20d='M%2032,29.5%20C%2032,29.5%2040.5,25.5%2038.03,19.85%20C%2034.15,14%2025,18%2022.5,24.5%20L%2022.51,26.6%20L%2022.5,24.5%20C%2020,18%209.906,14%206.997,19.85%20C%204.5,25.5%2011.85,28.85%2011.85,28.85'/%3e%3c!--%20talp%20--%3e%3cpath%20d='M%2011.5,30%20C%2017,27%2027,27%2032.5,30'/%3e%3cpath%20d='M%2011.5,33.5%20C%2017,30.5%2027,30.5%2032.5,33.5'/%3e%3cpath%20d='M%2011.5,37%20C%2017,34%2027,34%2032.5,37'/%3e%3c/g%3e%3c/svg%3e";function D2(r){return{aspectStyles:ue(()=>{const v=Number(r.aspectRatio);return v?{paddingBottom:String(1/v*100)+"%"}:void 0})}}const Oe=Ae({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...Se(),...Ze()},"VResponsive"),_e=Me()({name:"VResponsive",props:Oe(),setup(r,v){let{slots:p}=v;const{aspectStyles:h}=D2(r),{dimensionStyles:d}=Qe(r);return He(()=>{var c;return P("div",{class:["v-responsive",{"v-responsive--inline":r.inline},r.class],style:[d.value,r.style]},[P("div",{class:"v-responsive__sizer",style:h.value},null),(c=p.additional)==null?void 0:c.call(p),p.default&&P("div",{class:["v-responsive__content",r.contentClass]},[p.default()])])}),{}}}),b2=Ae({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...Oe(),...Se(),...We(),...ze()},"VImg"),G2=Me()({name:"VImg",directives:{intersect:je},props:b2(),emits:{loadstart:r=>!0,load:r=>!0,error:r=>!0},setup(r,v){let{emit:p,slots:h}=v;const{backgroundColorClasses:d,backgroundColorStyles:c}=Ie(()=>r.color),{roundedClasses:C}=Ke(r),w=Ye("VImg"),E=Y(""),g=Xe(),B=Y(r.eager?"loading":"idle"),O=Y(),x=Y(),F=ue(()=>r.src&&typeof r.src=="object"?{src:r.src.src,srcset:r.srcset||r.src.srcset,lazySrc:r.lazySrc||r.src.lazySrc,aspect:Number(r.aspectRatio||r.src.aspect||0)}:{src:r.src,srcset:r.srcset,lazySrc:r.lazySrc,aspect:Number(r.aspectRatio||0)}),T=ue(()=>F.value.aspect||O.value/x.value||0);ce(()=>r.src,()=>{m(B.value!=="idle")}),ce(T,(f,k)=>{!f&&k&&g.value&&H(g.value)}),$e(()=>m());function m(f){if(!(r.eager&&f)&&!(e2&&!f&&!r.eager)){if(B.value="loading",F.value.lazySrc){const k=new Image;k.src=F.value.lazySrc,H(k,null)}F.value.src&&t2(()=>{var k;p("loadstart",((k=g.value)==null?void 0:k.currentSrc)||F.value.src),setTimeout(()=>{var D;if(!w.isUnmounted)if((D=g.value)!=null&&D.complete){if(g.value.naturalWidth||K(),B.value==="error")return;T.value||H(g.value,null),B.value==="loading"&&I()}else T.value||H(g.value),z()})})}}function I(){var f;w.isUnmounted||(z(),H(g.value),B.value="loaded",p("load",((f=g.value)==null?void 0:f.currentSrc)||F.value.src))}function K(){var f;w.isUnmounted||(B.value="error",p("error",((f=g.value)==null?void 0:f.currentSrc)||F.value.src))}function z(){const f=g.value;f&&(E.value=f.currentSrc||f.src)}let N=-1;i2(()=>{clearTimeout(N)});function H(f){let k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const D=()=>{if(clearTimeout(N),w.isUnmounted)return;const{naturalHeight:V,naturalWidth:q}=f;V||q?(O.value=q,x.value=V):!f.complete&&B.value==="loading"&&k!=null?N=window.setTimeout(D,k):(f.currentSrc.endsWith(".svg")||f.currentSrc.startsWith("data:image/svg+xml"))&&(O.value=1,x.value=1)};D()}const W=s2(()=>({"v-img__img--cover":r.cover,"v-img__img--contain":!r.cover})),$=()=>{var D;if(!F.value.src||B.value==="idle")return null;const f=P("img",{class:["v-img__img",W.value],style:{objectPosition:r.position},crossorigin:r.crossorigin,src:F.value.src,srcset:F.value.srcset,alt:r.alt,referrerpolicy:r.referrerpolicy,draggable:r.draggable,sizes:r.sizes,ref:g,onLoad:I,onError:K},null),k=(D=h.sources)==null?void 0:D.call(h);return P(ie,{transition:r.transition,appear:!0},{default:()=>[Be(k?P("picture",{class:"v-img__picture"},[k,f]):f,[[a2,B.value==="loaded"]])]})},_=()=>P(ie,{transition:r.transition},{default:()=>[F.value.lazySrc&&B.value!=="loaded"&&P("img",{class:["v-img__img","v-img__img--preload",W.value],style:{objectPosition:r.position},crossorigin:r.crossorigin,src:F.value.lazySrc,alt:r.alt,referrerpolicy:r.referrerpolicy,draggable:r.draggable},null)]}),M=()=>h.placeholder?P(ie,{transition:r.transition,appear:!0},{default:()=>[(B.value==="loading"||B.value==="error"&&!h.error)&&P("div",{class:"v-img__placeholder"},[h.placeholder()])]}):null,b=()=>h.error?P(ie,{transition:r.transition,appear:!0},{default:()=>[B.value==="error"&&P("div",{class:"v-img__error"},[h.error()])]}):null,G=()=>r.gradient?P("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${r.gradient})`}},null):null,S=Y(!1);{const f=ce(T,k=>{k&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{S.value=!0})}),f())})}return He(()=>{const f=_e.filterProps(r);return Be(P(_e,r2({class:["v-img",{"v-img--absolute":r.absolute,"v-img--booting":!S.value},d.value,C.value,r.class],style:[{width:o2(r.width==="auto"?O.value:r.width)},c.value,r.style]},f,{aspectRatio:T.value,"aria-label":r.alt,role:r.alt?"img":void 0}),{additional:()=>P(he,null,[P($,null,null),P(_,null,null),P(G,null,null),P(M,null,null),P(b,null,null)]),default:h.default}),[[n2("intersect"),{handler:m,options:r.options},null,{once:!0}]])}),{currentSrc:E,image:g,state:B,naturalWidth:O,naturalHeight:x}}}),L2={p:P2,r:k2,n:y2,b:E2,q:B2,k:F2,P:C2,R:f2,N:v2,B:p2,Q:w2,K:m2},_2={name:"ChessBoard",data(){return{rows:8,cols:8,availableMoves:null,selectedPiece:null,selectedRow:null,selectedCol:null}},props:{gameData:{type:Object,required:!0},gameId:{type:String,required:!0}},computed:{player1(){return this.gameData?this.gameData.player1:null},player2(){return this.gameData?this.gameData.player2:null},currentTurn(){return this.gameData?this.gameData.game.board.configuration.turn:null},myColor(){const r=localStorage.getItem("userId");return this.player1&&r===this.player1.userId?this.player1.color:this.player2&&r===this.player2.userId?this.player2.color:null},myPlayer(){const r=localStorage.getItem("userId");return this.player1&&r===this.player1.userId?this.player1:this.player2&&r===this.player2.userId?this.player2:null},myCardHand(){return this.myPlayer?this.myPlayer.hand:null},pieceImages(){return L2},pieces(){return this.gameData?this.gameData.game.board.configuration.pieces:[]},gamemode(){return this.gameData?this.gameData.mode:null},chessGame(){return this.gameData?this.gameData.game:null},boardConfiguration(){return this.gameData?this.gameData.game.board.configuration:null},availableMoveSquares(){return!this.availableMoves||typeof this.availableMoves!="object"?[]:Object.values(this.availableMoves)}},methods:{async saveGame(){const r=this.currentTurn==="white"?"black":"white";this.chessGame.board.configuration.turn=r;const v=this.player1,p=this.player2,h=this.currentTurn==="white"?v:p,d=[...h.hand],c=d.indexOf(this.selectedPiece.toLowerCase());if(c!==-1)d.splice(c,1);else{const w=d.indexOf("w");w!==-1&&d.splice(w,1)}if(h.userId===v.userId?v.hand=d:p.hand=d,this.gamemode==="singleplayer"){this.$emit("gameUpdated",{player1:v,player2:p,game:this.chessGame});return}const C=Ve(qe,`games/${this.gameId}`);await Je(C,{player1:v,player2:p,game:this.chessGame})},selectPiece(r,v){const p=this.gameData.game;if(this.currentTurn!==this.myColor){console.warn("It's not your turn!");return}const h=this.getPieceAt(r,v);if(h&&this.myCardHand&&!this.myCardHand.includes(h.toLowerCase())&&!this.myCardHand.includes("w")){console.warn("Selected piece is not in your hand:",h);return}if(this.selectedPiece&&this.availableMoves.length>0){const d=this.getSquare(this.selectedRow,this.selectedCol),c=this.getSquare(r,v);if(this.availableMoves.includes(c)){d2.move(this.chessGame.board.configuration,d,c),this.chessGame.board.configuration=JSON.parse(JSON.stringify(this.chessGame.board.configuration)),this.saveGame(p),this.selectedPiece=null,this.selectedRow=null,this.selectedCol=null,this.availableMoves={};return}this.selectedPiece=null,this.selectedRow=null,this.selectedCol=null,this.availableMoves={}}h&&(this.myColor==="white"&&this.checkLowerCase(h)||this.myColor==="black"&&!this.checkLowerCase(h)?(this.selectedPiece=h,this.selectedRow=r,this.selectedCol=v,this.availableMoves=this.chessGame.moves(this.getSquare(r,v))):(this.selectedPiece=null,this.selectedRow=null,this.selectedCol=null,this.availableMoves=[]))},getPieceAt(r,v){const p=this.getSquare(r,v);return this.pieces[p]||null},getBoardRow(r){return this.myColor==="white"?8-r:r-1},getBoardCol(r){return this.myColor==="white"?r-1:8-r},checkLowerCase(r){return typeof r!="string"?!1:r!==r.toLowerCase()},getSquare(r,v){const p=String.fromCharCode(65+v),h=(r+1).toString();return p+h}}},M2={class:"chess-board"},A2=["onClick"],H2={key:0,class:"center piece-overlay full-square"},S2={key:2,class:"center"};function O2(r,v,p,h,d,c){return j(),X("div",M2,[(j(),X(he,null,Fe(8,C=>De("div",{key:C,class:"row"},[(j(),X(he,null,Fe(8,w=>De("div",{key:w,class:l2(["cell",(c.getBoardRow(C)+c.getBoardCol(w))%2===0?"light-cell":"dark-cell"]),onClick:E=>c.selectPiece(c.getBoardRow(C),c.getBoardCol(w))},[c.availableMoveSquares.includes(c.getSquare(c.getBoardRow(C),c.getBoardCol(w)))&&c.getPieceAt(c.getBoardRow(C),c.getBoardCol(w))!==null?(j(),X("div",H2,[P(Ee,{color:"#333333",class:"full-icon","x-large":""},{default:be(()=>v[0]||(v[0]=[Ge("mdi-circle-outline")])),_:1})])):le("",!0),c.getPieceAt(c.getBoardRow(C),c.getBoardCol(w))?(j(),u2(G2,{key:1,src:c.pieceImages[c.getPieceAt(c.getBoardRow(C),c.getBoardCol(w))],alt:"chess piece",class:"piece-img"},null,8,["src"])):le("",!0),c.availableMoveSquares.includes(c.getSquare(c.getBoardRow(C),c.getBoardCol(w)))&&c.getPieceAt(c.getBoardRow(C),c.getBoardCol(w))===null?(j(),X("div",S2,[P(Ee,{color:"#333333",large:""},{default:be(()=>v[1]||(v[1]=[Ge("mdi-circle")])),_:1})])):le("",!0)],10,A2)),64))])),64))])}const N2=c2(_2,[["render",O2],["__scopeId","data-v-897c7db0"]]),U2="/card_chess/assets/card_p_b-TIXsMIFb.png",R2="/card_chess/assets/card_p_w-Bm3HMNNE.png",j2="/card_chess/assets/card_kn_b-CWmZLDuM.png",I2="/card_chess/assets/card_kn_w-Ch_azdzB.png",K2="/card_chess/assets/card_b_b-CKFlHSO4.png",z2="/card_chess/assets/card_b_w-Dfcp6K5E.png",W2="/card_chess/assets/card_r_b-Cm3laa9k.png",V2="/card_chess/assets/card_r_w-DJmIONx8.png",q2="/card_chess/assets/card_q_b-Cdmb3Y7Y.png",J2="/card_chess/assets/card_q_w-CClx_U8X.png",Q2="/card_chess/assets/card_k_b-PeT-XOoG.png",Z2="/card_chess/assets/card_k_w-Dx5YriB0.png",Y2="/card_chess/assets/card_wild_b-D6JEVVo0.png",X2="/card_chess/assets/card_wild_w-BZWNKyUu.png";export{G2 as V,N2 as _,R2 as a,j2 as b,U2 as c,I2 as d,K2 as e,z2 as f,W2 as g,V2 as h,q2 as i,J2 as j,Q2 as k,Z2 as l,Y2 as m,X2 as n,d2 as o};
